#:import utils kivy.utils

<Chat_Screen@Screen>:
<History@Screen>:
<HistoryMain@Screen>:
<Account_Screen@Screen>:
<Account_Edit_Screen@Screen>:
<Result_Screen@Screen>:
<Headache@Screen>:
<Flashes@Screen>:
<Anisicoria@Screen>:
<Problem_Lst_Screen@Screen>:
<Registration_Screen@Screen>:
<Asking_Username@Screen>:
<Login_Screen@Screen>:
<Main_Screen@Screen>:

<CustomWidget>:
    id: historyItem
    height: 120
    size_hint_y:None
    radius: [10, 10]
    md_bg_color: utils.get_color_from_hex('#D1CFE2')
    orientation: "vertical"
    padding:[0,0,0,10]
    MDBoxLayout:
        MDLabel:
            id: historyItem_date
            text: "--/--"
            pos_hint: {"center_x": 0}
            font_name: "ElsieSwashCaps-Regular.ttf"
            font_size: 15
            halign: "center"
        MDLabel:
            id: historyItem_time
            text: "--:--"
            pos_hint: {"center_x": 1}
            font_name: "ElsieSwashCaps-Regular.ttf"
            font_size: 15
            theme_text_color: "Custom"
            text_color: utils.get_color_from_hex('#1111ff')
            halign: "center"
    MDLabel:
        id: historyItem_title
        text: "Headacehes"
        font_name: "ElsieSwashCaps-Regular.ttf"
        font_size: 20
        theme_text_color: "Custom"
        text_color: utils.get_color_from_hex('#000000')
        halign: "center"
    FitImage:
        id: historyItem_image
        size_hint:None,None
        size:60,60
        pos_hint: {"center_x": .5}
        source: "icon_folder/Headache.png"

MainWidget:
<MainWidget>:
    ScreenManager:
        id: sm
        Main_Screen:
            name: "main_screen"
            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"
                MDBoxLayout:
                    orientation: "vertical"
                    adaptive_height: True
                    spacing: dp(10)
                    MDBoxLayout:
                        padding: 50
                        MDLabel:
                            text: "Opto Triage"
                            halign: "center"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 50
                    MDBoxLayout:
                        orientation: "vertical"
                        adaptive_height: True
                        spacing: dp(10)
                        padding: [40,0,40,0]
                        MDTextField:
                            id: login_email_address
                            hint_text: "Email"
                            mode: "rectangle"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            hint_text_color_normal: utils.get_color_from_hex('#D4AFB9')
                            hint_text_color_focus: utils.get_color_from_hex('#D4AFB9')
                            line_color_normal: utils.get_color_from_hex('#D4AFB9')
                            line_color_focus: utils.get_color_from_hex('#D4AFB9')
                            text_color_normal: utils.get_color_from_hex('#D4AFB9')
                            text_color_focus: utils.get_color_from_hex('#D4AFB9')
                        MDTextField:
                            id: login_password
                            hint_text: "Password"
                            mode: "rectangle"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            hint_text_color_normal: utils.get_color_from_hex('#D4AFB9')
                            hint_text_color_focus: utils.get_color_from_hex('#D4AFB9')
                            line_color_normal: utils.get_color_from_hex('#D4AFB9')
                            line_color_focus: utils.get_color_from_hex('#D4AFB9')
                            text_color_normal: utils.get_color_from_hex('#D4AFB9')
                            text_color_focus: utils.get_color_from_hex('#D4AFB9')
                    MDFillRoundFlatButton:
                        text: "Login"
                        pos_hint:{"center_x": .5}
                        padding: [60,0,60,0]
                        on_press: root.login()
                        font_name: "ElsieSwashCaps-Regular.ttf"
                        font_size: 18
                        md_bg_color: utils.get_color_from_hex('#D4AFB9')
                        theme_text_color: "Custom"
                        text_color: 0, 0, 0, 1
                    MDFillRoundFlatButton:
                        text: "Sign Up"
                        pos_hint:{"center_x": .5}
                        padding: [50,0,50,0]
                        on_press: root.switching_to_registration()
                        font_name: "ElsieSwashCaps-Regular.ttf"
                        font_size: 18
                        md_bg_color: utils.get_color_from_hex('#D4AFB9')
                        theme_text_color: "Custom"
                        text_color: 0, 0, 0, 1
                    MDFlatButton:
                        text: "Forget your login details? Get help"
                        font_name: "ElsieSwashCaps-Regular.ttf"
                        pos_hint: {"center_x":0.5}
        Registration_Screen:
            name: "reg_screen"
            MDToolbar:
                id: reg_toolbar
                title: "[color='#ffffff']Sign Up[/color]"
                pos_hint: {"top": 1}
                md_bg_color: utils.get_color_from_hex('#D4AFB9')
                left_action_items: [["arrow-left", lambda x: root.back_to_login()]]
            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"
                MDBoxLayout:
                    orientation: "vertical"
                    padding: [40,80,40,40]
                    spacing: dp(20)
                    adaptive_height:True
                    MDBoxLayout:
                        spacing: dp(40)
                        adaptive_height:True
                        MDTextField:
                            id: f_name
                            hint_text: "First Name"
                            mode: "rectangle"
                            hint_text_color_normal: utils.get_color_from_hex('#D4AFB9')
                            hint_text_color_focus: utils.get_color_from_hex('#D4AFB9')
                            line_color_normal: utils.get_color_from_hex('#D4AFB9')
                            line_color_focus: utils.get_color_from_hex('#D4AFB9')
                            text_color_normal: utils.get_color_from_hex('#D4AFB9')
                            text_color_focus: utils.get_color_from_hex('#D4AFB9')
                        MDTextField:
                            id: l_name
                            hint_text: "Last Name"
                            mode: "rectangle"
                            hint_text_color_normal: utils.get_color_from_hex('#D4AFB9')
                            hint_text_color_focus: utils.get_color_from_hex('#D4AFB9')
                            line_color_normal: utils.get_color_from_hex('#D4AFB9')
                            line_color_focus: utils.get_color_from_hex('#D4AFB9')
                            text_color_normal: utils.get_color_from_hex('#D4AFB9')
                            text_color_focus: utils.get_color_from_hex('#D4AFB9')
                    MDBoxLayout:
                        adaptive_height:True
                        spacing: 20
                        MDTextField:
                            id: birth_date
                            hint_text: "Date of Birth"
                            mode: "rectangle"
                            hint_text_color_normal: utils.get_color_from_hex('#D4AFB9')
                            hint_text_color_focus: utils.get_color_from_hex('#D4AFB9')
                            line_color_normal: utils.get_color_from_hex('#D4AFB9')
                            line_color_focus: utils.get_color_from_hex('#D4AFB9')
                            text_color_normal: utils.get_color_from_hex('#D4AFB9')
                            text_color_focus: utils.get_color_from_hex('#D4AFB9')
                    MDBoxLayout:
                        adaptive_height:True
                        MDTextField:
                            id: phone_number
                            hint_text: "Phone Number"
                            mode: "rectangle"
                            hint_text_color_normal: utils.get_color_from_hex('#D4AFB9')
                            hint_text_color_focus: utils.get_color_from_hex('#D4AFB9')
                            line_color_normal: utils.get_color_from_hex('#D4AFB9')
                            line_color_focus: utils.get_color_from_hex('#D4AFB9')
                            text_color_normal: utils.get_color_from_hex('#D4AFB9')
                            text_color_focus: utils.get_color_from_hex('#D4AFB9')
                    MDBoxLayout:
                        spacing: dp(40)
                        adaptive_height:True
                        MDTextField:
                            id: country
                            hint_text: "Country"
                            mode: "rectangle"
                            hint_text_color_normal: utils.get_color_from_hex('#D4AFB9')
                            hint_text_color_focus: utils.get_color_from_hex('#D4AFB9')
                            line_color_normal: utils.get_color_from_hex('#D4AFB9')
                            line_color_focus: utils.get_color_from_hex('#D4AFB9')
                            text_color_normal: utils.get_color_from_hex('#D4AFB9')
                            text_color_focus: utils.get_color_from_hex('#D4AFB9')
                        MDTextField:
                            id: city
                            hint_text: "City"
                            mode: "rectangle"
                            hint_text_color_normal: utils.get_color_from_hex('#D4AFB9')
                            hint_text_color_focus: utils.get_color_from_hex('#D4AFB9')
                            line_color_normal: utils.get_color_from_hex('#D4AFB9')
                            line_color_focus: utils.get_color_from_hex('#D4AFB9')
                            text_color_normal: utils.get_color_from_hex('#D4AFB9')
                            text_color_focus: utils.get_color_from_hex('#D4AFB9')
                    MDBoxLayout:
                        adaptive_height:True
                        orientation: "vertical"
                        MDFillRoundFlatButton:
                            text: "Next"
                            pos_hint:{"center_x": .5}
                            padding: [50,0,50,0]
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 18
                            md_bg_color: utils.get_color_from_hex('#D4AFB9')
                            theme_text_color: "Custom"
                            text_color: 0, 0, 0, 1
                            on_press: root.switching_to_asking_username()
        Asking_Username:
            name: "asking_username"
            MDToolbar:
                id: user_toolbar
                title: "[color='#ffffff']Sign Up[/color]"
                pos_hint: {"top": 1}
                md_bg_color: utils.get_color_from_hex('#D4AFB9')
                left_action_items: [["arrow-left", lambda x: root.back_to_reg()]]
            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"
                MDBoxLayout:
                    orientation: "vertical"
                    adaptive_height: True
                    spacing: dp(10)
                    padding: dp(40)
                    MDTextField:
                        id: username
                        hint_text: "Email Address"
                        mode: "rectangle"
                        hint_text_color_normal: utils.get_color_from_hex('#D4AFB9')
                        hint_text_color_focus: utils.get_color_from_hex('#D4AFB9')
                        line_color_normal: utils.get_color_from_hex('#D4AFB9')
                        line_color_focus: utils.get_color_from_hex('#D4AFB9')
                        text_color_normal: utils.get_color_from_hex('#D4AFB9')
                        text_color_focus: utils.get_color_from_hex('#D4AFB9')
                    MDTextField:
                        id: password
                        hint_text: "Password"
                        mode: "rectangle"
                        hint_text_color_normal: utils.get_color_from_hex('#D4AFB9')
                        hint_text_color_focus: utils.get_color_from_hex('#D4AFB9')
                        line_color_normal: utils.get_color_from_hex('#D4AFB9')
                        line_color_focus: utils.get_color_from_hex('#D4AFB9')
                        text_color_normal: utils.get_color_from_hex('#D4AFB9')
                        text_color_focus: utils.get_color_from_hex('#D4AFB9')
                    MDTextField:
                        id: confirm_password
                        hint_text: "Confirm Password"
                        mode: "rectangle"
                        hint_text_color_normal: utils.get_color_from_hex('#D4AFB9')
                        hint_text_color_focus: utils.get_color_from_hex('#D4AFB9')
                        line_color_normal: utils.get_color_from_hex('#D4AFB9')
                        line_color_focus: utils.get_color_from_hex('#D4AFB9')
                        text_color_normal: utils.get_color_from_hex('#D4AFB9')
                        text_color_focus: utils.get_color_from_hex('#D4AFB9')
                    MDFillRoundFlatButton:
                        text: "Sign Up"
                        pos_hint:{"center_x": .5}
                        padding: [40,0,40,0]
                        font_name: "ElsieSwashCaps-Regular.ttf"
                        font_size: 18
                        md_bg_color: utils.get_color_from_hex('#D4AFB9')
                        theme_text_color: "Custom"
                        text_color: 0, 0, 0, 1
                        on_press: root.registering()
        Problem_Lst_Screen:
            name: "problem_lst_screen"
            MDBoxLayout:
                adaptive_height:True
                pos_hint:{"top":1}
                Widget:
                Custom_Button:
                    size_hint:None,None
                    size:75,75
                    source: "icon_folder/Arrow.png"
                    on_press: root.switching_to_chat()
            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"

                MDBoxLayout:
                    orientation: "vertical"
                    adaptive_height: True
                    spacing: dp(40)
                    padding: dp(10)

                    MDBoxLayout:
                        MDLabel:
                            text: "Opto Triage"
                            halign: "center"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 50

                    MDBoxLayout:
                        MDLabel:
                            text: "What problem are you having?"
                            halign: "center"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 18
                    MDBoxLayout:
                        adaptive_size: True
                        padding:[0,0,0,60]
                        pos_hint:{"center_x":0.5}
                        MDGridLayout:
                            size_hint:(None,None)
                            width: 300
                            height: 300
                            cols:2
                            spacing: dp(10)
                            Custom_Button:
                                size_hint:0.5,0.5
                                source: "icon_folder/Headache_btn.png"
                                on_press: root.switching_to_headache_screen()
                            Custom_Button:
                                size_hint:0.5,0.5
                                source: "icon_folder/Flashes_btn.png"
                                on_press: root.switching_to_flashes_screen()
                            Custom_Button:
                                size_hint:0.5,0.5
                                source: "icon_folder/Anisicoria_btn.png"
                                on_press: root.switching_to_anisicoria_screen()
                            Custom_Button:
                                size_hint:0.5,0.5
                                source: "icon_folder/RedEye_btn.png"
                    MDBoxLayout:
                        orientation: "vertical"
                        spacing: dp(10)
                        MDLabel:
                            text: "More Coming Soon..."
                            halign: "center"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 24
                        FitImage:
                            source: "icon_folder/Animal.png"
                            size_hint:None,None
                            size: 60,60
                            pos_hint:{"center_x":0.5}
            MDBoxLayout:
                adaptive_height:True
                md_bg_color: utils.get_color_from_hex('#D4AFB9')
                pos:0,0
                padding:[20,0,20,0]
                MDIconButton:
                    icon: "icon_folder/Paper.png"
                    pos_hint:{"center_x":1}
                    on_press: root.showing_history()
                Widget:
                MDIconButton:
                    icon: "icon_folder/Home.png"
                    pos_hint:{"center_x":0.5}
                Widget:
                MDIconButton:
                    icon: "icon_folder/Account.png"
                    pos_hint:{"right":1}
                    on_press: root.switching_to_account_page()
        Headache:
            name: "headaches"
   
            MDBoxLayout:
                adaptive_height:True
                pos_hint:{"top":1}
                Widget:
                Custom_Button:
                    size_hint:None,None
                    size:75,75
                    source: "icon_folder/Arrow.png"
                    on_press: root.switching_to_chat()
            MDBoxLayout:
                adaptive_height:True
                pos_hint:{"center_x": .53, "center_y": .95}
                MDFillRoundFlatButton:
                    text: "Cancel test"
                    halign: "center"
                    font_name: "ElsieSwashCaps-Regular.ttf"
                    font_size: 15
                    md_bg_color: utils.get_color_from_hex('#D1CFE2')
                    text_color: utils.get_color_from_hex('#111111')
                    on_press: root.cancelTest('Headache')
            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"
                MDBoxLayout:
                    orientation: "vertical"
                    adaptive_height: True
                    padding: dp(10)
                    spacing: dp(10)

                    MDBoxLayout:
                        adaptive_height:True
                        MDLabel:
                            text: "Opto Triage"
                            halign: "center"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 50
                            size_hint_y:None
                            height: 60
                    MDBoxLayout:
                        adaptive_height:True
                        MDLabel:
                            text: "Headaches"
                            halign: "center"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 32
                            size_hint_y:None
                            height: 100
                            theme_text_color: "Custom"
                            text_color: utils.get_color_from_hex('#f2564b')
                        FitImage:
                            size_hint:None,None
                            size:100,100
                            source: "icon_folder/Headache.png"
                    MDBoxLayout:
                        adaptive_height:True
                        MDLabel:
                            id: headache_question
                            text: "Are the headaches unilateral or bilateral?"
                            halign: "center"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 24
                            size_hint_y:None
                            height: 130
                    MDBoxLayout:
                        size_hint_y:None
                        height: dp(150)
                        spacing: dp(10)
                        orientation: "vertical"
                        Button:
                            id: headache_btn1
                            background_normal: "icon_folder/btn_bg.png"
                            background_down: "icon_folder/btn_bg2.png"
                            text: "Unilateral"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 24
                            on_press: root.main_logic(headache_btn1, headache_question, "Headache")
                        Button:
                            id: headache_btn2
                            background_normal: "icon_folder/btn_bg2.png"
                            background_down: "icon_folder/btn_bg.png"
                            text: "Bilateral"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 24
                            on_press: root.main_logic(headache_btn1, headache_question, "Headache")
                        Button:
                            id: headache_btn3
                            background_normal: "icon_folder/btn_bg.png"
                            background_down: "icon_folder/btn_bg2.png"
                            disabled: True
                            background_disabled_normal: ""
                            text: "Unilateral"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 24
                            on_press: root.main_logic(headache_btn1, headache_question, "Headache")
            MDBoxLayout:
                adaptive_height:True
                md_bg_color: utils.get_color_from_hex('#D4AFB9')
                padding:[20,0,20,0]
                MDIconButton:
                    icon: "icon_folder/Paper.png"
                    pos_hint:{"center_x":1}
                    on_press: root.showing_history()
                Widget:
                MDIconButton:
                    icon: "icon_folder/Home.png"
                    pos_hint:{"center_x":0.5}
                    on_press: root.back_to_home("left")
                Widget:
                MDIconButton:
                    icon: "icon_folder/Account.png"
                    pos_hint:{"right":1}
                    on_press: root.switching_to_account_page()
        Result_Screen:
            name: "result_screen"
            MDBoxLayout:
                adaptive_height:True
                pos_hint:{"top":1}
                Widget:
                Custom_Button:
                    size_hint:None,None
                    size:75,75
                    source: "icon_folder/Arrow.png"
                    on_press: root.switching_to_chat()
            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"
                MDBoxLayout:
                    orientation: "vertical"
                    adaptive_height: True
                    padding: dp(10)
                    MDBoxLayout:
                        adaptive_height:True
                        MDLabel:
                            text: "Opto Triage"
                            halign: "center"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 50
                            size_hint_y:None
                            height: 60
                    MDBoxLayout:
                        adaptive_height:True
                        MDLabel:
                            id: heading
                            text: "Headaches"
                            halign: "center"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 32
                            size_hint_y:None
                            height: 100
                            theme_text_color: "Custom"
                            text_color: utils.get_color_from_hex('#f2564b')
                        FitImage:
                            id: heading_img
                            size_hint:None,None
                            size:100,100
                            source: "icon_folder/Headache.png"

                    MDBoxLayout:
                        adaptive_height:True
                        MDLabel:
                            text: "Result"
                            halign: "center"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 32
                            size_hint_y:None
                            height: 50
                    MDBoxLayout:
                        pos_hint:{"center_x":0.5}
                        size_hint_y:None
                        height: 300
                        ScrollView:
                            id: lst_placeholder


            MDBoxLayout:
                adaptive_height:True
                md_bg_color: utils.get_color_from_hex('#D4AFB9')
                pos:0,0
                padding:[20,0,20,0]
                MDIconButton:
                    icon: "icon_folder/Paper.png"
                    pos_hint:{"center_x":1}
                    on_press: root.showing_history()
                Widget:
                MDIconButton:
                    icon: "icon_folder/Home.png"
                    pos_hint:{"center_x":0.5}
                    on_press: root.back_to_home("up")
                Widget:
                MDIconButton:
                    icon: "icon_folder/Account.png"
                    pos_hint:{"right":1}
                    on_press: root.switching_to_account_page()
        Flashes:
            name: "flashes_screen"

            MDBoxLayout:
                adaptive_height:True
                pos_hint:{"top":1}
                Widget:
                Custom_Button:
                    size_hint:None,None
                    size:75,75
                    source: "icon_folder/Arrow.png"
                    on_press: root.switching_to_chat()
            MDBoxLayout:
                adaptive_height:True
                pos_hint:{"center_x": .53, "center_y": .95}
                MDFillRoundFlatButton:
                    text: "Cancel test"
                    halign: "center"
                    font_name: "ElsieSwashCaps-Regular.ttf"
                    font_size: 15
                    md_bg_color: utils.get_color_from_hex('#D1CFE2')
                    text_color: utils.get_color_from_hex('#111111')
                    on_press: root.cancelTest('Flashes of Light')
            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"
                MDBoxLayout:
                    orientation: "vertical"
                    adaptive_height: True
                    padding: dp(10)
                    spacing: dp(10)

                    MDBoxLayout:
                        adaptive_height:True
                        MDLabel:
                            text: "Opto Triage"
                            halign: "center"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 50
                            size_hint_y:None
                            height: 60
                    MDBoxLayout:
                        adaptive_height:True
                        MDLabel:
                            text: "Flashes"
                            halign: "center"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 32
                            size_hint_y:None
                            height: 100
                            theme_text_color: "Custom"
                            text_color: utils.get_color_from_hex('#f2564b')
                        FitImage:
                            size_hint:None,None
                            size:100,100
                            source: "icon_folder/BlueEye.png"
                    MDBoxLayout:
                        adaptive_height:True
                        MDLabel:
                            id: flashes_question
                            text: "Are the flashes unilateral or bilateral?"
                            halign: "center"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 24
                            size_hint_y:None
                            height: 130
                    MDBoxLayout:
                        size_hint_y:None
                        height: dp(150)
                        spacing: dp(10)
                        orientation: "vertical"
                        Button:
                            id: flashes_btn1
                            background_normal: "icon_folder/btn_bg.png"
                            background_down: "icon_folder/btn_bg2.png"
                            text: "Unilateral"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 24
                            on_press: root.main_logic(flashes_btn1, flashes_question, 'Flashes of Light')
                        Button:
                            id: flashes_btn2
                            background_normal: "icon_folder/btn_bg2.png"
                            background_down: "icon_folder/btn_bg.png"
                            text: "Bilateral"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 24
                            on_press: root.main_logic(flashes_btn1, flashes_question, 'Flashes of Light')
                        Button:
                            id: flashes_btn3
                            background_normal: "icon_folder/btn_bg.png"
                            background_down: "icon_folder/btn_bg2.png"
                            disabled: True
                            background_disabled_normal: ""
                            text: "Unilateral"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 24
                            on_press: root.main_logic(flashes_btn1, flashes_question, 'Flashes of Light')
            MDBoxLayout:
                adaptive_height:True
                md_bg_color: utils.get_color_from_hex('#D4AFB9')
                padding:[20,0,20,0]
                MDIconButton:
                    icon: "icon_folder/Paper.png"
                    pos_hint:{"center_x":1}
                    on_press: root.showing_history()
                Widget:
                MDIconButton:
                    icon: "icon_folder/Home.png"
                    pos_hint:{"center_x":0.5}
                    on_press: root.back_to_home("left")
                Widget:
                MDIconButton:
                    icon: "icon_folder/Account.png"
                    pos_hint:{"right":1}
                    on_press: root.switching_to_account_page()

        Account_Screen:
            name: "account_screen"
            MDBoxLayout:
                adaptive_height:True
                pos_hint:{"top":1}
                Widget:
                Custom_Button:
                    size_hint:None,None
                    size:75,75
                    source: "icon_folder/Arrow.png"
                    on_press: root.switching_to_chat()
            MDBoxLayout:
                adaptive_height:True
                pos_hint: {"center_x": .5, "center_y": .92}
                MDLabel:
                    text: "Opto Triage"
                    halign: "center"
                    font_name: "ElsieSwashCaps-Regular.ttf"
                    font_size: 50
                    size_hint_y:None
                    height: 60
            MDBoxLayout:
                orientation: "vertical"
                pos_hint: {"center_x": .5, "center_y": .53}
                adaptive_height: True
                padding: dp(10)
                spacing: dp(20)
                MDBoxLayout:
                    adaptive_size:True
                    pos_hint: {"center_x":.5}
                    FitImage:
                        id: profile_image_placeholder
                        size_hint:None,None
                        size:140,140
                        source: "icon_folder/Account_.png"
                MDBoxLayout:
                    adaptive_height: True
                    pos_hint:{"center_x": .5}
                    radius: [10, 10]
                    size_hint_x:0.9
                    md_bg_color: utils.get_color_from_hex('#D1CFE2')
                    orientation: "vertical"
                    padding: [20,20,20,20]
                    spacing: 10
                    MDLabel:
                        size_hint_y:None
                        height:10
                        text: "Personal Profile"
                        font_name: "ElsieSwashCaps-Regular.ttf"
                        font_size: 20
                        theme_text_color: "Custom"
                        text_color: utils.get_color_from_hex('#000000')
                        halign: "center"
                    MDBoxLayout:
                        adaptive_height: True
                        MDBoxLayout:
                            adaptive_height: True
                            orientation: "vertical"
                            pos_hint: {"center_x":.5}
                            spacing: 10
                            MDBoxLayout:
                                adaptive_height: True
                                MDLabel:
                                    size_hint_y: None
                                    height: 30
                                    text: "First Name : "
                                    font_name: "ElsieSwashCaps-Regular.ttf"
                                    font_size: 16
                                MDLabel:
                                    id: account_fname
                                    size_hint_y: None
                                    height: 30
                                    font_name: "ElsieSwashCaps-Regular.ttf"
                                    font_size: 16
                            MDBoxLayout:
                                adaptive_height: True
                                MDLabel:
                                    size_hint_y: None
                                    height: 30
                                    text: "Last Name : "
                                    font_name: "ElsieSwashCaps-Regular.ttf"
                                    font_size: 16
                                MDLabel:
                                    id: account_lname
                                    size_hint_y: None
                                    height: 30
                                    font_name: "ElsieSwashCaps-Regular.ttf"
                                    font_size: 16
                            MDBoxLayout:
                                adaptive_height: True
                                MDLabel:
                                    size_hint_y: None
                                    height: 30
                                    text: "DOB : "
                                    font_name: "ElsieSwashCaps-Regular.ttf"
                                    font_size: 16
                                MDLabel:
                                    id: dob
                                    size_hint_y: None
                                    height: 30
                                    font_name: "ElsieSwashCaps-Regular.ttf"
                                    font_size: 16
                            MDBoxLayout:
                                adaptive_height: True
                                MDLabel:
                                    size_hint_y: None
                                    height: 30
                                    text: "Phone Number :"
                                    font_name: "ElsieSwashCaps-Regular.ttf"
                                    font_size: 16
                                MDLabel:
                                    id: account_phone_number
                                    size_hint_y: None
                                    height: 30
                                    font_name: "ElsieSwashCaps-Regular.ttf"
                                    font_size: 16
                            MDBoxLayout:
                                adaptive_height: True
                                MDLabel:
                                    size_hint_y: None
                                    height: 30
                                    text: "Email : "
                                    font_name: "ElsieSwashCaps-Regular.ttf"
                                    font_size: 16
                                    valign:"center"
                                MDLabel:
                                    id: account_email_address
                                    adaptive_height: True
                                    font_name: "ElsieSwashCaps-Regular.ttf"
                                    font_size: 16
                            MDBoxLayout:
                                adaptive_height: True
                                MDLabel:
                                    size_hint_y: None
                                    height: 30
                                    text: "Country"
                                    font_name: "ElsieSwashCaps-Regular.ttf"
                                    font_size: 16
                                MDLabel:
                                    id: account_country
                                    size_hint_y: None
                                    height: 30
                                    text: "Actual Name"
                                    font_name: "ElsieSwashCaps-Regular.ttf"
                                    font_size: 16
                            MDBoxLayout:
                                adaptive_height: True
                                MDLabel:
                                    size_hint_y: None
                                    height: 30
                                    text: "City"
                                    font_name: "ElsieSwashCaps-Regular.ttf"
                                    font_size: 16
                                MDLabel:
                                    id: account_city
                                    size_hint_y: None
                                    height: 30
                                    text: "Actual Name"
                                    font_name: "ElsieSwashCaps-Regular.ttf"
                                    font_size: 16
            MDBoxLayout:
                padding: [60,0,60,0]
                adaptive_height:True
                pos_hint: {"center_x": .5, "center_y": .12}
                MDBoxLayout:
                    adaptive_height:True
                    MDFillRoundFlatButton:
                        text: "Go Back"
                        font_name: "ElsieSwashCaps-Regular.ttf"
                        font_size: 28
                        md_bg_color: utils.get_color_from_hex('#D4AFB9')
                        text_color: utils.get_color_from_hex('#111111')
                        on_press: root.back_to_home("left")
                    Widget:
                    MDFillRoundFlatButton:
                        text: "Edit"
                        font_name: "ElsieSwashCaps-Regular.ttf"
                        font_size: 28
                        md_bg_color: utils.get_color_from_hex('#D1CFE2')
                        text_color: utils.get_color_from_hex('#111111')
                        on_press: root.switching_to_account_edit_page()

            MDBoxLayout:
                adaptive_height:True
                md_bg_color: utils.get_color_from_hex('#D4AFB9')
                padding:[20,0,20,0]
                MDIconButton:
                    icon: "icon_folder/Paper.png"
                    pos_hint:{"center_x":1}
                    on_press: root.showing_history()
                Widget:
                MDIconButton:
                    icon: "icon_folder/Home.png"
                    pos_hint:{"center_x":0.5}
                    on_press: root.back_to_home("left")
                Widget:
                MDIconButton:
                    icon: "icon_folder/Account.png"
                    pos_hint:{"right":1}
                    on_press: root.switching_to_account_page()

        Account_Edit_Screen:
            name: "account_edit_screen"
            AnchorLayout:
                anchor_x: "center"
                anchor_y: "top"
                MDBoxLayout:
                    orientation: "vertical"
                    adaptive_height: True
                    padding: dp(10)
                    spacing: dp(20)
                    MDBoxLayout:
                        adaptive_size:True
                        pos_hint: {"center_x":.5}
                        FitImage:
                            id: profile_image_placeholder_edit
                            size_hint:None,None
                            size:160,160
                            source: "icon_folder/Account_.png"
                    MDBoxLayout:
                        adaptive_height: True
                        pos_hint:{"center_x": .5}
                        radius: [10, 10]
                        md_bg_color: utils.get_color_from_hex('#D1CFE2')
                        orientation: "vertical"
                        padding: [10,10,10,10]
                        spacing: 10
                        MDLabel:
                            size_hint_y:None
                            height:10
                            text: "Personal Profile"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 20
                            theme_text_color: "Custom"
                            text_color: utils.get_color_from_hex('#000000')
                            halign: "center"
                        MDBoxLayout:
                            adaptive_height: True
                            MDBoxLayout:
                                adaptive_height: True
                                orientation: "vertical"
                                pos_hint: {"center_x":.5}
                                spacing: 10
                                MDBoxLayout:
                                    adaptive_height: True
                                    MDLabel:
                                        size_hint_y: None
                                        height: 30
                                        text: "First Name : "
                                        font_name: "ElsieSwashCaps-Regular.ttf"
                                        font_size: 16
                                    TextInput:
                                        id: account_fname_edit
                                        size_hint_y: None
                                        height: 30
                                        font_name: "ElsieSwashCaps-Regular.ttf"
                                        font_size: 16
                                MDBoxLayout:
                                    adaptive_height: True
                                    MDLabel:
                                        size_hint_y: None
                                        height: 30
                                        text: "Last Name : "
                                        font_name: "ElsieSwashCaps-Regular.ttf"
                                        font_size: 16
                                    TextInput:
                                        id: account_lname_edit
                                        size_hint_y: None
                                        height: 30
                                        font_name: "ElsieSwashCaps-Regular.ttf"
                                        font_size: 16
                                MDBoxLayout:
                                    adaptive_height: True
                                    MDLabel:
                                        size_hint_y: None
                                        height: 30
                                        text: "DOB : "
                                        font_name: "ElsieSwashCaps-Regular.ttf"
                                        font_size: 16
                                    TextInput:
                                        id: dob_edit
                                        size_hint_y: None
                                        height: 30
                                        font_name: "ElsieSwashCaps-Regular.ttf"
                                        font_size: 16
                                MDBoxLayout:
                                    adaptive_height: True
                                    MDLabel:
                                        size_hint_y: None
                                        height: 30
                                        text: "Phone Number :"
                                        font_name: "ElsieSwashCaps-Regular.ttf"
                                        font_size: 16
                                    TextInput:
                                        id: account_phone_number_edit
                                        size_hint_y: None
                                        height: 30
                                        font_name: "ElsieSwashCaps-Regular.ttf"
                                        font_size: 16
                                MDBoxLayout:
                                    adaptive_height: True
                                    MDLabel:
                                        size_hint_y: None
                                        height: 30
                                        text: "Email : "
                                        font_name: "ElsieSwashCaps-Regular.ttf"
                                        font_size: 16
                                        valign:"center"
                                    TextInput:
                                        id: account_email_address_edit
                                        adaptive_height: True
                                        font_name: "ElsieSwashCaps-Regular.ttf"
                                        font_size: 16
                                MDBoxLayout:
                                    adaptive_height: True
                                    MDLabel:
                                        size_hint_y: None
                                        height: 30
                                        text: "Country"
                                        font_name: "ElsieSwashCaps-Regular.ttf"
                                        font_size: 16
                                    TextInput:
                                        id: account_country_edit
                                        size_hint_y: None
                                        height: 30
                                        text: "Actual Name"
                                        font_name: "ElsieSwashCaps-Regular.ttf"
                                        font_size: 16
                                MDBoxLayout:
                                    adaptive_height: True
                                    MDLabel:
                                        size_hint_y: None
                                        height: 30
                                        text: "City"
                                        font_name: "ElsieSwashCaps-Regular.ttf"
                                        font_size: 16
                                    TextInput:
                                        id: account_city_edit
                                        size_hint_y: None
                                        height: 30
                                        text: "Actual Name"
                                        font_name: "ElsieSwashCaps-Regular.ttf"
                                        font_size: 16

                    MDFillRoundFlatButton:
                        text: "Upload Image"
                        pos_hint:{"center_x": .5}
                        font_name: "ElsieSwashCaps-Regular.ttf"
                        font_size: 18
                        md_bg_color: utils.get_color_from_hex('#D4AFB9')
                        theme_text_color: "Custom"
                        text_color: 0, 0, 0, 1
                        on_press: root.profile_image()
                    MDFillRoundFlatButton:
                        text: "Save"
                        pos_hint:{"center_x": .5}
                        font_name: "ElsieSwashCaps-Regular.ttf"
                        font_size: 18
                        md_bg_color: utils.get_color_from_hex('#D1CFE2')
                        theme_text_color: "Custom"
                        text_color: 0, 0, 0, 1
                        on_press: root.saving()

            MDBoxLayout:
                adaptive_height:True
                md_bg_color: utils.get_color_from_hex('#D4AFB9')
                padding:[20,0,20,0]
                MDIconButton:
                    icon: "icon_folder/Paper.png"
                    pos_hint:{"center_x":1}
                    on_press: root.showing_history()
                Widget:
                MDIconButton:
                    icon: "icon_folder/Home.png"
                    pos_hint:{"center_x":0.5}
                    on_press: root.back_to_home("left")
                Widget:
                MDIconButton:
                    icon: "icon_folder/Account.png"
                    pos_hint:{"right":1}
                    on_press: root.switching_to_account_page()


        Anisicoria:
            name: "anisicoria_screen"
            MDBoxLayout:
                adaptive_height:True
                pos_hint:{"top":1}
                Widget:
                Custom_Button:
                    size_hint:None,None
                    size:75,75
                    source: "icon_folder/Arrow.png"
                    on_press: root.switching_to_chat()
            MDBoxLayout:
                adaptive_height:True
                pos_hint:{"center_x": .53, "center_y": .95}
                MDFillRoundFlatButton:
                    text: "Cancel test"
                    halign: "center"
                    font_name: "ElsieSwashCaps-Regular.ttf"
                    font_size: 15
                    md_bg_color: utils.get_color_from_hex('#D1CFE2')
                    text_color: utils.get_color_from_hex('#111111')
                    on_press: root.cancelTest('Anisicoria')
            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"
                MDBoxLayout:
                    orientation: "vertical"
                    adaptive_height: True
                    padding: dp(10)
                    spacing: dp(10)
                    MDBoxLayout:
                        adaptive_height:True
                        MDLabel:
                            text: "Opto Triage"
                            halign: "center"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 50
                            size_hint_y:None
                            height: 60
                    MDBoxLayout:
                        adaptive_height:True
                        MDLabel:
                            text: "Anisicoria"
                            halign: "center"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 32
                            size_hint_y:None
                            height: 100
                            theme_text_color: "Custom"
                            text_color: utils.get_color_from_hex('#f2564b')
                        FitImage:
                            size_hint:None,None
                            size:150,100
                            source: "icon_folder/PupilEye2.png"
                    MDBoxLayout:
                        adaptive_height:True
                        MDLabel:
                            id: anisicoria_question
                            text: "Is it recent or longstanding?"
                            halign: "center"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 24
                            size_hint_y:None
                            height: 130
                    MDBoxLayout:
                        size_hint_y:None
                        height: dp(150)
                        spacing: dp(10)
                        orientation: "vertical"
                        Button:
                            id: anisicoria_btn1
                            background_normal: "icon_folder/btn_bg.png"
                            background_down: "icon_folder/btn_bg2.png"
                            text: "Recent"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 24
                            on_press: root.main_logic(anisicoria_btn1, anisicoria_question, 'Anisicoria')
                        Button:
                            id: anisicoria_btn2
                            background_normal: "icon_folder/btn_bg2.png"
                            background_down: "icon_folder/btn_bg.png"
                            text: "Longstanding"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 24
                            on_press: root.main_logic(anisicoria_btn1, anisicoria_question, 'Anisicoria')
                        Button:
                            id: anisicoria_btn3
                            background_normal: "icon_folder/btn_bg.png"
                            background_down: "icon_folder/btn_bg2.png"
                            disabled: True
                            background_disabled_normal: ""
                            text: "Unilateral"
                            font_name: "ElsieSwashCaps-Regular.ttf"
                            font_size: 24
                            on_press: root.main_logic(anisicoria_btn1, anisicoria_question, 'Anisicoria')
            MDBoxLayout:
                adaptive_height:True
                md_bg_color: utils.get_color_from_hex('#D4AFB9')
                pos:0,0
                padding:[20,0,20,0]
                MDIconButton:
                    icon: "icon_folder/Paper.png"
                    pos_hint:{"center_x":1}
                    on_press: root.showing_history()
                Widget:
                MDIconButton:
                    icon: "icon_folder/Home.png"
                    pos_hint:{"center_x":0.5}
                    on_press: root.back_to_home("left")
                Widget:
                MDIconButton:
                    icon: "icon_folder/Account.png"
                    pos_hint:{"right":1}
                    on_press: root.switching_to_account_page()

        History:
            name: "history_screen"
            MDBoxLayout:
                adaptive_height:True
                pos_hint: {"center_x": .5, "center_y": .92}
                MDLabel:
                    text: "Opto Triage"
                    halign: "center"
                    font_name: "ElsieSwashCaps-Regular.ttf"
                    font_size: 50
                    size_hint_y:None
                    height: 50
            MDBoxLayout:
                adaptive_height:True
                pos_hint: {"center_x": .5, "center_y": .84}
                padding: dp(30)
                MDLabel:
                    text: "Results History :"
                    halign: "left"
                    font_name: "ElsieSwashCaps-Regular.ttf"
                    font_size: 32
                    size_hint_y:None
                    height: 50

            MDBoxLayout:
                adaptive_height: True
                pos_hint: {"center_x": .5, "center_y": .5}
                radius: [10, 10]
                size_hint_x:0.9
                md_bg_color: utils.get_color_from_hex('#D1CFE2')
                orientation: "vertical"
                padding: [20,20,20,20]
                spacing: 10
                MDBoxLayout:
                    MDLabel:
                        id: history_date_placeholder
                        text: "--/--"
                        font_name: "ElsieSwashCaps-Regular.ttf"
                        font_size: 20
                            
                    MDLabel:
                        id: history_time_placeholder
                        text: "--:--"
                        halign: "right"
                        font_name: "ElsieSwashCaps-Regular.ttf"
                        font_size: 20
                        theme_text_color: "Custom"
                        text_color: utils.get_color_from_hex('#1111ff')
                MDBoxLayout:
                    size_hint_y:None
                    height: 50
                    pos_hint: {"center_x": .5, "center_y": .5}
                    MDLabel:
                        id: history_name_placeholder
                        text: "Headacehs"
                        font_name: "ElsieSwashCaps-Regular.ttf"
                        font_size: 32
                        theme_text_color: "Custom"
                        text_color: utils.get_color_from_hex('#000000')
                        halign: "center"
                    FitImage:
                        size_hint:None,None
                        size:50,50
                        pos_hint: {"center_x": .92}
                        source: "icon_folder/Headache.png"
                ScrollView:
                    size_hint_y:None
                    height: 300
                    MDLabel:
                        id: history_placeholder
                        markup:True
                        adaptive_height: True
                        text: "No History"
                        font_name: "ElsieSwashCaps-Regular.ttf"
                        font_size: 16

            MDFillRoundFlatButton:
                pos_hint: {"center_x": .5, "center_y": .14}
                text: "Go Back"
                size_hint_y:0.065
                font_name: "ElsieSwashCaps-Regular.ttf"
                font_size: 28
                md_bg_color: utils.get_color_from_hex('#D1CFE2')
                text_color: utils.get_color_from_hex('#111111')
                on_press: root.showing_history()

            MDBoxLayout:
                adaptive_height:True
                md_bg_color: utils.get_color_from_hex('#D4AFB9')
                padding:[20,0,20,0]
                MDIconButton:
                    icon: "icon_folder/Paper.png"
                    pos_hint:{"center_x":1}
                    on_press: root.showing_history()
                Widget:
                MDIconButton:
                    icon: "icon_folder/Home.png"
                    pos_hint:{"center_x":0.5}
                    on_press: root.back_to_home("right")
                Widget:
                MDIconButton:
                    icon: "icon_folder/Account.png"
                    pos_hint:{"right":1}
                    on_press: root.switching_to_account_page()
        HistoryMain:
            name: "history_main_screen"
      
            MDBoxLayout:
                adaptive_height:True
                pos_hint:{"top":1}
                Widget:
                Custom_Button:
                    size_hint:None,None
                    size:75,75
                    source: "icon_folder/Arrow.png"
                    on_press: root.switching_to_chat()
                    
            MDBoxLayout:
                adaptive_height:True
                pos_hint: {"center_x": .5, "center_y": .92}
                MDLabel:
                    text: "Opto Triage"
                    halign: "center"
                    font_name: "ElsieSwashCaps-Regular.ttf"
                    font_size: 50
                    size_hint_y:None
                    height: 60

            MDBoxLayout:
                adaptive_height:True
                pos_hint: {"center_x": .5, "center_y": .8}
                padding: dp(10)
                MDLabel:
                    text: "Results History :"
                    halign: "left"
                    font_name: "ElsieSwashCaps-Regular.ttf"
                    font_size: 32
                    size_hint_y:None
                    height: 50
                     
            ScrollView:        
                size_hint_y:0.9
                pos_hint: {"center_x": .5, "center_y": .3}
                size_hint_x:0.86
                MDGridLayout:
                    id: historyItems
                    cols:2
                    spacing: dp(20)
                    size_hint_y:None

            MDBoxLayout:
                adaptive_height:True
                md_bg_color: utils.get_color_from_hex('#D4AFB9')
                pos:0,0
                padding:[20,0,20,0]
                MDIconButton:
                    icon: "icon_folder/Paper.png"
                    pos_hint:{"center_x":1}
                    on_press: root.showing_history()
                Widget:
                MDIconButton:
                    icon: "icon_folder/Home.png"
                    pos_hint:{"center_x":0.5}
                    on_press: root.back_to_home("right")
                Widget:
                MDIconButton:
                    icon: "icon_folder/Account.png"
                    pos_hint:{"right":1}
                    on_press: root.switching_to_account_page()
        Chat_Screen:
            name: "chat_screen"
            MDBoxLayout:
                adaptive_height:True
                pos_hint:{"top":1}
                Widget:
                Custom_Button:
                    size_hint:None,None
                    size:75,75
                    source: "icon_folder/Arrow.png"
                    on_press: root.switching_to_chat()
            MDBoxLayout:
                orientation: "vertical"
                MDBoxLayout:
                    adaptive_height: True
                    MDLabel:
                        text: "Opto Triage"
                        halign: "center"
                        font_name: "ElsieSwashCaps-Regular.ttf"
                        font_size: 50
                MDBoxLayout:
                    adaptive_height: True
                    MDLabel:
                        text: "Messages"
                        font_name: "ElsieSwashCaps-Regular.ttf"
                        font_size: 32
                        size_hint_y:None
                        height:70
                MDBoxLayout:
                    padding: 20
                    ScrollView:
                        MDBoxLayout:
                            adaptive_height: True
                            orientation: "vertical"
                            spacing: 15
                            MDBoxLayout:
                                adaptive_height: True
                                spacing: 10
                                FitImage:
                                    size_hint:None,None
                                    size: 50,50
                                    source: "icon_folder/Account.png"
                                MDLabel:
                                    size_hint_y:None
                                    height: 50
                                    text: "Message"
                                    md_bg_color: utils.get_color_from_hex('#D4AFB9')
                                    radius: 20
                            MDBoxLayout:
                                adaptive_height: True
                                spacing: 10
                                FitImage:
                                    size_hint:None,None
                                    size: 50,50
                                    source: "icon_folder/Account.png"
                                MDLabel:
                                    size_hint_y:None
                                    height: 50
                                    text: "Message"
                                    md_bg_color: utils.get_color_from_hex('#D1CFE2')
                                    radius: 20
                            MDBoxLayout:
                                adaptive_height: True
                                spacing: 10
                                FitImage:
                                    size_hint:None,None
                                    size: 50,50
                                    source: "icon_folder/Account.png"
                                MDLabel:
                                    size_hint_y:None
                                    height: 50
                                    text: "Message"
                                    md_bg_color: utils.get_color_from_hex('#D4AFB9')
                                    radius: 20
                            MDBoxLayout:
                                adaptive_height: True
                                spacing: 10
                                FitImage:
                                    size_hint:None,None
                                    size: 50,50
                                    source: "icon_folder/Account.png"
                                MDLabel:
                                    size_hint_y:None
                                    height: 50
                                    text: "Message"
                                    md_bg_color: utils.get_color_from_hex('#D4AFB9')
                                    radius: 20

            MDBoxLayout:
                adaptive_height:True
                md_bg_color: utils.get_color_from_hex('#D4AFB9')
                padding:[20,0,20,0]
                MDIconButton:
                    icon: "icon_folder/Paper.png"
                    pos_hint:{"center_x":1}
                    on_press: root.showing_history()
                Widget:
                MDIconButton:
                    icon: "icon_folder/Home.png"
                    pos_hint:{"center_x":0.5}
                    on_press: root.back_to_home("down")
                Widget:
                MDIconButton:
                    icon: "icon_folder/Account.png"
                    pos_hint:{"right":1}
                    on_press: root.switching_to_account_page()
                    

